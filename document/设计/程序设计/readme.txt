1. 精益引擎计算的时候，由于先取库存，在取订单。由于时间差，会造成库存没有计算，需求也没有计算进去。
解决办法，是否可以先SnapShot数据库，在从SnapShot中去查库存和订单。

2. 通过ThreadLocal来存储当前用户对象，在Save需要Audit的对象的时候来更新CreateUser, LastmodifyUser。
http://www.iteye.com/problems/14672
要考虑异步Web怎么办

3. 用IStatelessSession来替代ISession，提高效率。

4. webservice支持session，Hprose代替Webservice，是否支持Session。

5. SubContract把生产单和采购单合并。

6. 路线/订单上的CheckDetOption不需要，通过MRP逻辑来检查明细是否有上游路线。

7. 取价格单的日期参数设定，需要企业选项。

8. 订单上取消是否打印条码，如果自动生成条码一定要打印的。

9. 暂不支持按批号出入库操作，因为实际操作不好管理。

10.订单号自定义生成

11.工单下线前，预查看投料结果。

12.二级缓存，主数据（零件、库位）等

13.精益引擎采用数据库快照来读取数据。

14.二级事务类型，在那里配置？先路线――》再库位上取？计划外出入库通过选择原因来决定出入库的事务类型。

15.区分iss-wo和委外加工的事务类型iss-srs。

16.库存明细视图由库存视图、在途视图、在制品视图组成。

17.存储过程来对冲正负库存数。

18.单据增加删除状态，并不真正删除。

19.未知错误捕获，发邮件通知。

20.生产线/工艺流程中增加是否流水线来支持整车上线向前推进工序。

21.hu表增加字段，是否让步使用、让步后不能在让步。

22.收货设置超收范围和比率

23.收货调整生成新的调整单。

24.生产线暂停，所有生产单和绑定出来的订单暂停，拉动出来的订单不用暂停。

25.生产单Bom明细增加预计消耗时间。

26.退货、调整供应商可以确认。

27.货币的编辑要放到Service里面

28.零件的新增和编辑要放到Service里面

29.FlowDetail batchSize是否可以去掉，好像没有用。

30.自制半成品，如驾驶室、发动机，条码中要包含VAN，装配时校验VAN号。

31.工序上的库位优先于BOM上的工位。

32.要货单收货完成后才能完工，如果发货数满足订单数就完工的话，会造成差异收货后不能继续发货。差异收货后，如果是退回发货方要调整发货数，如果是记录在途库存不用调整发货数，在途库存处理结果是调整发货方库存要调整发货数。

33.和上条相关，允许超发只能超发一次，不能多次超发。

34.零件上定义标准容器代码和容量，路线上也可以定义。优先取路线上的。

35.工艺流程增加节拍时间。

36.订单收货全部完成才关闭。

37.订单增加CompleteDate。

38.零件增加老图号。

39.路线策略：排序，等待时间-》如果为0等于无限大

40.订单（除生产单）没有上线操作，但是有In-Proecess状态。路线上要去掉自动上线选项。增加供应商确认字段。

41.条码上状态增加是否被捡货状态。

42.生产回冲，如果生产单有多个成品，投料时要指定到生产单成品，如果直接投料到生产线会有问题。

43.订单子类型：分普通、退货、冲销，取消冲销，冲销就是对收货或发货的取消，记录的库存事物子代码不同。收货单取消，把状态修改为Cancel，库存退回发货单上，发货单状态修改为Submit，订单上收货数量也修改回来。
收货单冲销时，判断是否有发货单，有减少发货单和订单的数量，发货单可以重新收货。没有就减少订单的数量。

44.订单质量状态：普通、不合格品、待验  合并发货时要校验是否一致

45.FlowDet上的HuLotSize是否只有打印条码才用？UC内包装，HuLotSize外包装。增加ContainerSize表示容器包装，可能容器中放的是整包装的物料。容器包装>=外包装>=内包装

46.OrderStrategy手工生成的为Manual，精益引擎生成、绑定生成。

47.改了开始时间也要重新计算OrderBom上的预计消耗时间。

48.订单绑定表增加被绑定路线的StrategyType字段表示排序/Kit/排序生产

49.Routing的referenceOP就是工位的概念，就是没有单独工位主数据的维护。

50.工单释放/上线后后是否要更新OrderBomDetail.EstimateConsumeTime。如果StartTime（预计开始时间）已经小于当前时间了。

51.订单上容器的数量不需要记录，数量/UC就是容器数量。

52.订单绑定的时候要考虑退货，来源和目的要交换一下。

53.收货表中增加来源库位，冲销（收货取消）时可以扣减发货数（对于没有ASN的直接收货）。

54.快速收货/退回可以指定生效时间，正常发货/收货不能指定，需要手工调整。

55.生产单重排序写一个存储过程。张胜

56.计划外出入库需要有一张定义表，选择不同的移动类型，判断是否要输入成本中心等关联字段。

57.库存事务表增加Plant字段，为了区分是否跨工厂的移库。跨工厂的移库需要导出给SAP。

58.判定为不合格品后不要立即结算。

59.手工结算分条码和数量，就不会出现结算部分条码的情况。结算需要记录库存事务，一进一出，保持平衡，可以解决部分数量结算的问题。

60.数量变条码可能会出现条码中部分寄售的问题。

61.LocTrans上的IsSubcontract有什么用处？

62.收货明细可以和发货明细一一对应。

63.对象的one-to-many的关系不要，全部采用手工load。

64.委外不用考虑委外发货，收货的时候增加记录采购Bill，不考虑寄售。

65.单位换算数量不能修改。

66.退货结算要判断PartyFrom和PartyTo哪一个是BillAddr的Party，采购：PartyFrom为非退货，PartyTo为退货。销售：PartyTo为非退货，PartyFrom为退货。

67.发货/收货满足包装，表示1.总发货数/收货数是否是单包装的整数倍。2.如果按条码发货/收货，条码数是否和包装数匹配。

68.收货的时候判断ASN是否关闭，不然会造成重复收货。

69.冲销要原来模样恢复，结算的信息也要恢复，现在想到的解决方法是，在发货单、收货单、计划外出入库单、盘点单上记录结算数量。

70.冻结的零件不能发货，不能做采购收货，但是可以做移库收货。

71.冲销收货时，如果没有发货单直接把发货也冲销了，如果是QuickOrder，把订单也Cancel了。